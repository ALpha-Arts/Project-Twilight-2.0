# **Honesty: Honest Work**
# Population, Resources, Rural Development

# TODO: Remove the v0.1 code
je_grand_tomorrow_honesty = {
	icon = "gfx/interface/icons/event_icons/twilight_event_honesty.dds"

	immediate = {
		set_variable = {
			name = var_je_grand_tomorrow_honesty_value
			value = 0
		}
	}

	on_monthly_pulse = {
		# # Temporarily disabled for v0.1
		# effect = {
		# 	random_list = {
		# 		11 = {}
		# 		1 = {
		# 			random_list = {
		# 				# je_grand_tomorrow_honesty_taxation
		# 				1 = {
		# 					trigger_event = {
		# 						id = twilight_grand_tomorrow_events.210
		# 						popup = yes
		# 					}
		# 				}
		# 				# je_grand_tomorrow_honesty_resources
		# 				1 = {
		# 					trigger_event = {
		# 						id = twilight_grand_tomorrow_events.220
		# 						popup = yes
		# 					}
		# 				}
		# 			}
		# 		}
		# 	}
		# }
	}

	current_value = {
		value = var:var_je_grand_tomorrow_honesty_value
	}

	goal_add_value = {
		add = 2
	}

	complete = {
		# # Temporarily disabled for v0.1
		# scope:journal_entry = {
		# 	is_goal_complete = yes
		# }
		is_at_war = no

		# Temporarily added for v0.1
		OR = {
			has_law = law_type:law_per_capita_based_taxation
			has_law = law_type:law_proportional_taxation
			has_law = law_type:law_graduated_taxation
		}
		any_scope_state = {
			filter = {
				is_incorporated = yes
			}
			any_scope_building = {
				OR = {
					is_farm_building = yes
					is_plantation_building = yes
					is_raw_industries_building = yes
				}
				occupancy > 0.9
				level >= 5
			}
			percent >= 0.75
		}
	}

	on_complete = {
		effect_je_grand_tomorrow_advance = yes
		effect_country_reduce_slumber_of_the_giant_effect = yes
		trigger_event = {
			id = twilight_grand_tomorrow_events.201
			popup = yes
		}
	}

	invalid = {
		trigger_je_grand_tomorrow_complete = yes
	}

	progressbar = yes

	weight = 5000

	inheritable = no
}

je_grand_tomorrow_honesty_taxation = {
	icon = "gfx/interface/icons/event_icons/twilight_event_honesty.dds"

	on_monthly_pulse = {}

	complete = {
		OR = {
			has_law = law_type:law_per_capita_based_taxation
			has_law = law_type:law_proportional_taxation
			has_law = law_type:law_graduated_taxation
		}
	}

	on_complete = {
		effect_je_grand_tomorrow_honesty_advance = yes
		effect_country_reduce_slumber_of_the_giant_effect = yes
		trigger_event = {
			id = twilight_grand_tomorrow_events.211
			popup = yes
		}
	}

	invalid = {
		trigger_je_grand_tomorrow_complete = yes
	}

	weight = 1000

	inheritable = no

	should_be_pinned_by_default = yes
}

je_grand_tomorrow_honesty_resources = {
	icon = "gfx/interface/icons/event_icons/twilight_event_honesty.dds"

	on_monthly_pulse = {}

	complete = {
		any_scope_state = {
			filter = {
				is_incorporated = yes
			}
			any_scope_building = {
				OR = {
					is_farm_building = yes
					is_plantation_building = yes
					is_raw_industries_building = yes
				}
				occupancy > 0.9
				level >= 5
			}
			percent >= 0.75
		}
	}

	on_complete = {
		effect_je_grand_tomorrow_honesty_advance = yes
		trigger_event = {
			id = twilight_grand_tomorrow_events.221
			popup = yes
		}
	}

	invalid = {
		trigger_je_grand_tomorrow_complete = yes
	}

	weight = 1000

	inheritable = no

	should_be_pinned_by_default = yes
}
